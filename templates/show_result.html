{% extends "base.html"%}
{% load index %}

{% block title%}Poll Result{% endblock %}

{% block styles %}
{% endblock %}

{% block content %}
    <div>
        <h2>Poll name: {{poll.poll_name}}</h2>
        <table class = "table table-striped">
            <tr>
                <th>Options</th>
                <th>Option Name</th>
                <th>Total Count</th>
            </tr>
            {% for polloption in polloptions %}
            <tr>
                <td>{{forloop.counter}}</td>
                <td>{{polloption.option_name}}</td>
                <td>{{choicecount|index:forloop.counter0}}/{{userpoll}}</td>
            </tr>
            {% endfor %}
        </table>
        
        <div class = "card">
            {% if user_receipt %}
            <div = class= "card-body">
                <p><strong>You voted in this poll</strong></p>
                <p><strong>Your receipt is: {{user_receipt}}</strong></p>
            {% endif %}
            {% if max_choice_list|length < 2%}
                <h5>Highest Vote Count:<h5>
                {% for choice in max_choice_list %}
                   <p>Option: {{choice}}</p>
                {% endfor %}
                <p>With the count of {{highest_count}} (Winner!)</p>
            {% else %}
            <h5>Highest Vote Count:<h5>
                {% for choice in max_choice_list %}
                   <p>Option: {{choice}}</p>
                {% endfor %}
                <p>With the count of {{highest_count}} (Tie!)</p>
                <p>Please await further instructions on redraw procedure if any.</p>
            {% endif %}
            </div>
        </div>
    </div>
{% endblock%}

{% block javascript %}

{% endblock %}